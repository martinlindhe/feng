# STATUS: 1%
# - SAMPLE: need samples with image ID field
# - MAGIC: handle default: must be valid match for Color map and Image type (or get a ton of false matches)

references:
  - https://en.wikipedia.org/wiki/Truevision_TGA
  - http://www.paulbourke.net/dataformats/tga/
  - https://github.com/HexFiend/HexFiend/blob/master/templates/Images/TGA.tcl
  - https://www.sweetscape.com/010editor/repository/files/TGA.bt
  - https://github.com/martinlindhe/formats/blob/master/parse/image/img_tga.go

kind: image
extensions: [.tga]
mime: image/x-tga

endian: little

header:
  u8 ID length: ??
  u8 Color map:
    eq 00: No color map
    eq 01: Present
    #default: invalid # XXX if non-matching, file is invalid!
  u8 Image type:  # XXX decode type value (multi-bit) in describe()
    bit b0000_0111: type
    bit b0000_1000: RLE  # if false, image data is uncompressed
    #default: invalid # XXX if non-matching, file is invalid! (in case non-specified bits is set)
    # is enumerated in the lower three bits, with the fourth bit as a flag for RLE. Some possible values are:
    #  type 0: no image data is present
    #  type 1: uncompressed color-mapped image
    #  type 2: uncompressed true-color image
    #  type 3: uncompressed black-and-white (grayscale) image
    #  type 1+rle: run-length encoded color-mapped image
    #  type 2+rle: run-length encoded true-color image
    #  type 3+rle: run-length encoded black-and-white (grayscale) image

  u8[5] Color map specification: ??
  u8[10] Image specification: ??
