# STATUS: 2%

references:
  - https://en.wikipedia.org/wiki/TIFF
  - https://www.sweetscape.com/010editor/repository/files/TIF.bt
  - https://github.com/HexFiend/HexFiend/blob/master/templates/Images/TIFF.tcl

kind: image
extensions: [.tiff, .tif]
mime: image/tiff
endian: little

magic:
  - offset: 0000
    match: c'MM'
  - offset: 0000
    match: c'II'

structs:
  header:
    u16 Endian: # XXX match on ascii[2]
      eq c'MM': BIG_ENDIAN
      eq c'II': LITTLE_ENDIAN
      default: invalid
    if self.Endian == BIG_ENDIAN:
      endian: big

    u16 Signature: 00 2a # should decode the same due to endian directive above

    # XXX rest

layout:
  - header Header
