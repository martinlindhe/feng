# STATUS: 10%

# HI: adjust size of Title field depending on GBC rom or not.

references:
  - https://www.problemkaputt.de/gbatek.htm#gbacartridges

kind: executable
name: Nintendo Gameboy Advance ROM
extensions: [.gba, .bin]
endian: little # XXX

structs:
  header:
    u8[4] Entry point: ??         # 32-bit ARM branch opcode, eg "B rom_start"
    u8[156] Nintendo Logo: ??     # XXX static?
    ascii[12] Game title: ??
    ascii[4] Game Code: ??
    ascii[2] Maker Code: ??
    u8 Reserved: "96"
    u8 Main unit code: ??
    u8 Device type: ??
    u8[7] Reserved: ??
    u8 Software version: ??
    u8 Header checksum: ??
    u8[2] Reserved: ??

    #u8[4] RAM entry point: ??     # 32-bit ARM branch opcode, eg "B rom_start"
    #u8 Boot mode:
    #  eq 01: Joybus mode
    #  eq 02: Normal mode
    #  eq 03: Multiplay mode
    #u8 Slave ID number: ??
    #u8[26] Reserved: ??
    #u8[4] JOYBUS entry point: ??  # 32-bit ARM branch opcode, eg "B rom_start"

layout:
  - header Header
