# STATUS: 1%

# Compressed files may be generated by the COMPRESS.EXE program (appearing in Microsoft's Setup Toolkit for Visual C++),
# and uncompressed with the EXPAND.EXE program distributed with Windows and MS-DOS. Compressed files have the last
# character of the file extension replaced with an underscore, or sometimes a dollar sign.

references:
  - http://fileformats.archiveteam.org/wiki/MS-DOS_installation_compression

kind: system
name: Microsoft KWAJ compressed
mime: application/x-ms-compress-kwaj
endian: little

magic:
  - offset: 0000
    match: c'KWAJ'

structs:
  header:
    ascii[4] Signature: c'KWAJ'
    u32 Unknown: ??
    u16 Method:
      eq 0000: Uncompressed
      eq 0001: XOR
      eq 0002: LZSS
      eq 0003: LZ77 + Huffman
      eq 0004: MSZIP (based on DEFLATE)

layout:
  - header Header
